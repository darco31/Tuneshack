{% extends 'base.html' %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}

<h1 class="post-head">{{ post.title }}</h1>
<div class="container-post">
    <small class="post-author-styles">By: {{ post.author }} - {{ post.created_on }}<br></small>
    <hr>
    <br>
    <p class="post-details-styles">{{ post.body|linebreaks }}</p>
</div>
<br><br>
{% if user.is_authenticated %}
<a href="{% url 'edit_post' post.pk %}" class="edit_button">Edit</a>

<a href="{% url 'delete_post' post.pk %}" class="delete_button">Delete</a>
{% endif %}

<a href="{% url 'home' %}" class="back_button">Back</a>

<!-- https://dev.to/radualexandrub/how-to-add-like-unlike-button-to-your-django-blog-5gkg -->

{% if user.is_authenticated %}
<form action="{% url 'blogpost_like' object.id %}" method="POST">
    {% csrf_token %}

    {% if post_is_liked %}
    <button type="submit" name="blogpost_id" value="{{object.id}}" class="btn btn-info">Unlike</button>
    {% else %}
    <button type="submit" name="blogpost_id" value="{{object.id}}" class="btn btn-info">Like</button>
    {% endif %}
</form>
{% else %}
<a class="btn btn-outline-info" href="{% url 'login' %}?next={{request.path}}">Log in to like this article!</a><br>
{% endif %}
<strong class="text-secondary">{{ number_of_likes }} Like{{ number_of_likes|pluralize }}</strong>
{% endblock %}